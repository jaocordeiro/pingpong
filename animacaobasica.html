<html>
    <body>
        <canvas id="folha" width="600" height="500"></canvas>
    
        <script>

            window.onload = function() {
                setInterval(executar, 1000 / 30);
            }
            
            var folhaDesenho = document.getElementById("folha"); 
            var areaDesenho = folhaDesenho.getContext("2d");
            var larguraCampo = 600;
            var alturaCampo = 500;
            var espessuraRede = 5;
            var diametroBola = 10;
            var espessuraRaquete = 11;
            var alturaRaquete = 100;
            var efeitoRaquete = 0.4;
            var posicaoJogador1 = posicaoJogador2 = 40
            var posicaoBolaX = posicaoBolaY = 10;
            var velocidadeBolaPosicaoX = velocidadeBolaPosicaoY = 6;
            var pontuacaoJogador1 = pontuacaoJogador2 = 0;

            folhaDesenho.addEventListener('mousemove', function(e){
                posicaoJogador1 = e.clienty - alturaRaquete / 2;
            });
            
            function executar() {

                areaDesenho.fillStyle = '#286047'; // cor do campo

                areaDesenho.fillRect(0, 0, larguraCampo, alturaCampo);

                areaDesenho.fillStyle = '#ffffff'; // cor da bolinha - raquete e rede

                areaDesenho.fillRect(larguraCampo/2 - espessuraRede/2, 0, espessuraRede, alturaCampo);

                //Desenha a bola
                areaDesenho.fillRect(posicaoBolaX - diametroBola/2, posicaoBolaY - diametroBola/2, diametroBola, diametroBola);

                //Raquete
                areaDesenho.fillRect(0, posicaoJogador1, espessuraRaquete, alturaRaquete);
                areaDesenho.fillRect(larguraCampo - espessuraRaquete, posicaoJogador2, espessuraRaquete, alturaRaquete);

                // Escrever pontuação dos jogadores
                areaDesenho.fillText("Humano - " + pontuacaoJogador1 + " pontos", 100, 100);
                areaDesenho.fillText("Computador - " + pontuacaoJogador2 + " pontos", larguraCampo - 200, 100);

                posicaoBolaX = posicaoBolaX + velocidadeBolaPosicaoX;
                posicaoBolaY = posicaoBolaY + velocidadeBolaPosicaoY;

                //verifica lateral superior
                if(posicaoBolaY < 0 && velocidadeBolaPosicaoY < 0) {
                    velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
                }

                //verifica lateral inferiro
                if(posicaoBolaY > alturaCampo && velocidadeBolaPosicaoY > 0) {
                    velocidadeBolaPosicaoY = -velocidadeBolaPosicaoY;
                }

                //Verifica se foi ponto do jogador 2
                    if(posicaoBolaX < 0) {
                            if(posicaoBolaY > posicaoJogador1 && posicaoBolaY < posicaoJogador1 + alturaRaquete) {
                                //Rebate a bola
                                velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;

                                var diferencaY = posicaoBolaY - (posicaoJogador1 + alturaRaquete / 2);
                                velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
                                } else {
                                // Ponto jogador 2
                                pontuacaoJogador2 = pontuacaoJogador2 + 1;
                                // colcar bola no centro
                            }
                        }
            
                // Verifica se o jogador 1 fez ponto
                    if(posicaoBolaX > larguraCampo) {
                        if(posicaoBolaY > posicaoJogador2 && posicaoBolaY < posicaoJogador2 + alturaRaquete) {
                            // Rebater a bola
                            velocidadeBolaPosicaoX = -velocidadeBolaPosicaoX;

                            var diferencaY = posicaoBolaY - (posicaoJogador2 + alturaRaquete / 2);
                            velocidadeBolaPosicaoY = diferencaY * efeitoRaquete;
                    } else {
                        // Ponto jogador 1
                        pontuacaoJogador1 = pontuacaoJogador1 + 1;

                        // Colocar no centro
                    }
                }    
            }
        </script>
    </body>
</html>